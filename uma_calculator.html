<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uma Musume Race Rank Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .skills-section {
            grid-column: 1 / -1;
        }

        .skill-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .skill-controls select {
            flex: 1;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-calculate {
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: transform 0.3s;
        }

        .btn-calculate:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
        }

        .skill-list {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            max-height: 200px;
            overflow-y: auto;
        }

        .skill-item {
            background: #e9ecef;
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .skill-item:hover {
            background: #dee2e6;
        }

        .skill-item button {
            padding: 4px 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .skill-item button:hover {
            background: #c82333;
        }

        .results {
            grid-column: 1 / -1;
            background: #212529;
            color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            min-height: 300px;
            line-height: 1.6;
            overflow-y: auto;
            max-height: 500px;
        }

        .results .highlight {
            color: #ffc107;
            font-weight: bold;
        }

        .results .success {
            color: #28a745;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            .skills-section {
                grid-column: 1;
            }

            .header h1 {
                font-size: 1.8em;
            }
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 10px;
            margin-top: 15px;
            color: #0c5460;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Uma Musume Race Calculator</h1>
            <p>Calculate your Uma's racing performance score and rank</p>
        </div>

        <div class="content">

            <div class="section">
                <h2>Uma Musume Stats</h2>
                <div class="stat-grid">
                    <div class="form-group">
                        <label for="speed">Speed</label>
                        <input type="number" id="speed" min="0" max="1200" value="800">
                    </div>
                    <div class="form-group">
                        <label for="stamina">Stamina</label>
                        <input type="number" id="stamina" min="0" max="1200" value="600">
                    </div>
                    <div class="form-group">
                        <label for="power">Power</label>
                        <input type="number" id="power" min="0" max="1200" value="750">
                    </div>
                    <div class="form-group">
                        <label for="guts">Guts</label>
                        <input type="number" id="guts" min="0" max="1200" value="500">
                    </div>
                    <div class="form-group">
                        <label for="wit">Wit</label>
                        <input type="number" id="wit" min="0" max="1200" value="400">
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label for="charTemplate">Character Template</label>
                    <select id="charTemplate" onchange="loadCharacterTemplate()">
                        <option value="">-- Select Character --</option>
                    </select>
                </div>

                <div class="info-box">
                    üí° Tip: Select a character template to auto-load aptitudes, or enter stats manually.
                </div>
            </div>

            <div class="section">
                <h2>Settings</h2>
                <div class="form-group">
                    <label for="uniqueLevel">Unique Skill Level (1-4)</label>
                    <input type="number" id="uniqueLevel" min="1" max="4" value="4">
                </div>
                <div class="form-group">
                    <label for="starLevel">Star Level (1-5)</label>
                    <input type="number" id="starLevel" min="1" max="5" value="3">
                </div>

                <div class="info-box" style="margin-top: 50px;">
                    Star Level affects unique skill multiplier:<br>
                    ‚Ä¢ 1-2‚òÖ: Level √ó 120<br>
                    ‚Ä¢ 3-5‚òÖ: Level √ó 170
                </div>
            </div>

            <div class="section skills-section">
                <h2>Skills</h2>
                <div class="skill-controls">
                    <select id="skillSelect">
                        <option value="">-- Select Skill to Add --</option>
                    </select>
                    <button class="btn btn-primary" onclick="addSkill()">Add Skill</button>
                    <button class="btn btn-warning" onclick="clearAllSkills()">Clear All</button>
                </div>

                <h3 style="margin-top: 20px; margin-bottom: 10px;">Equipped Skills:</h3>
                <div class="skill-list" id="skillList">
                    <div style="color: #6c757d; text-align: center; padding: 20px;">
                        No skills added yet. Select a skill above and click "Add Skill".
                    </div>
                </div>

                <button class="btn-calculate" onclick="calculate()">üèÜ CALCULATE</button>
            </div>

            <div class="results" id="results">
Welcome to Uma Musume Race Rank Calculator!

Instructions:
1. Enter your character's stats (Speed, Stamina, Power, Guts, Wit)
2. (Optional) Select a character template
3. Select skills from dropdown and click "Add Skill"
4. Set unique skill level and star level
5. Click "CALCULATE" to see your results!

Your calculation results will appear here.
            </div>
        </div>
    </div>

    <script>

        const skillDatabase = {

            gold: [
                {name: "Burning Spirit SPD", score: 633},
                {name: "Burning Spirit STA", score: 633},
                {name: "Burning Spirit PWR", score: 633},
                {name: "Burning Spirit GUT", score: 633},
                {name: "Burning Spirit WIT", score: 633},
                {name: "Runaway", score: 296},
                {name: "Super Lucky Seven", score: 334},
                {name: "Fall Frenzy", score: 461},
                {name: "Spring Spectacle", score: 461},
                {name: "Right-Handed Demon", score: 461},
                {name: "Yodo Invicta", score: 461},
                {name: "Firm Course Menace", score: 461},
                {name: "Swinging Maestro", score: 508},
                {name: "Breath of Fresh Air", score: 508},
                {name: "Iron Will", score: 508},
                {name: "Indomitable", score: 508},
                {name: "Unruffled", score: 508},
                {name: "Calm and Collected", score: 559},
                {name: "Race Planner", score: 559},
                {name: "Sleeping Lion", score: 406},
                {name: "Keen Eye", score: 559},
                {name: "Trackblazer", score: 559},
                {name: "Cooldown", score: 457},
                {name: "Adrenaline Rush", score: 457},
                {name: "Miraculous Step", score: 559},
                {name: "Restless", score: 406},
                {name: "Gourmand", score: 559},
                {name: "Relax", score: 559},
                {name: "Go-Home Specialist", score: 406},
                {name: "Serenity", score: 406}
            ],

            blue: [
                {name: "Be Still", score: 239},
                {name: "Familiar Ground", score: 217},
                {name: "Free-Spirited", score: 195},
                {name: "Ignited Spirit STA", score: 263},
                {name: "Corner Recovery ‚óã", score: 217},
                {name: "Straightaway Recovery", score: 217},
                {name: "Lay Low", score: 217},
                {name: "Pace Strategy", score: 217},
                {name: "Calm in a Crowd", score: 217},
                {name: "Stamina to Spare", score: 239},
                {name: "Preferred Position", score: 239},
                {name: "Standing By", score: 174},
                {name: "Wait-and-See", score: 174},
                {name: "Watchful Eye", score: 239},
                {name: "Rosy Outlook", score: 239},
                {name: "Deep Breaths", score: 195},
                {name: "Extra Tank", score: 195},
                {name: "Soft Step", score: 239},
                {name: "Passing Pro", score: 195},
                {name: "Moxie", score: 174},
                {name: "Hydrate", score: 239},
                {name: "A Small Breather", score: 239},
                {name: "After-School Stroll", score: 174},
                {name: "Levelheaded", score: 174},
                {name: "Triple 7s", score: 217},
                {name: "Shake It Out", score: 217}
            ],

            yellow: [
                {name: "Ignited Spirit SPD", score: 263},
                {name: "Ignited Spirit PWR", score: 263},
                {name: "Ignited Spirit GUT", score: 263},
                {name: "Ignited Spirit WIT", score: 263},
                {name: "Corner Adept ‚óã", score: 217},
                {name: "Straightaway Adept", score: 217},
                {name: "Ramp Up", score: 217},
                {name: "Homestretch Haste", score: 217},
                {name: "Fast-Paced", score: 174},
                {name: "Prepared to Pass", score: 239},
                {name: "Position Pilfer", score: 239},
                {name: "Outer Swell", score: 239},
                {name: "Masterful Gambit", score: 174},
                {name: "Gap Closer", score: 174},
                {name: "Productive Plan", score: 239},
                {name: "Up-Tempo", score: 239},
                {name: "Steadfast", score: 239},
                {name: "Inside Scoop", score: 195},
                {name: "Sprint Straightaways ‚óé", score: 210},
                {name: "Sprint Straightaways ‚óã", score: 174},
                {name: "Sprint Corners ‚óé", score: 210},
                {name: "Sprint Corners ‚óã", score: 174},
                {name: "Huge Lead", score: 210},
                {name: "Mile Straightaways ‚óé", score: 288},
                {name: "Mile Straightaways ‚óã", score: 239},
                {name: "Mile Corners ‚óé", score: 288},
                {name: "Mile Corners ‚óã", score: 239},
                {name: "Shifting Gears", score: 239},
                {name: "Unyielding Spirit", score: 239},
                {name: "Medium Straightaways ‚óé", score: 288},
                {name: "Medium Straightaways ‚óã", score: 239},
                {name: "Medium Corners ‚óé", score: 288},
                {name: "Medium Corners ‚óã", score: 239}
            ],

            green: [
                {name: "Right-Handed ‚óé", score: 174},
                {name: "Right-Handed ‚óã", score: 129},
                {name: "Left-Handed ‚óé", score: 174},
                {name: "Left-Handed ‚óã", score: 129},
                {name: "Spring Runner ‚óé", score: 174},
                {name: "Spring Runner ‚óã", score: 129},
                {name: "Summer Runner ‚óé", score: 174},
                {name: "Summer Runner ‚óã", score: 129},
                {name: "Fall Runner ‚óé", score: 174},
                {name: "Fall Runner ‚óã", score: 129},
                {name: "Winter Runner ‚óé", score: 174},
                {name: "Winter Runner ‚óã", score: 129},
                {name: "Firm Conditions ‚óé", score: 174},
                {name: "Firm Conditions ‚óã", score: 129},
                {name: "Wet Conditions ‚óé", score: 174},
                {name: "Wet Conditions ‚óã", score: 129}
            ],

            red: [
                {name: "Intimidate", score: 210},
                {name: "Speed Eater", score: 239},
                {name: "Tether", score: 239}
            ],

            unique: [
                {name: "U=ma2", score: 180},
                {name: "Pure Heart", score: 180},
                {name: "Super-Duper Climax", score: 180},
                {name: "Certain Victory", score: 180},
                {name: "Legacy of the Strong", score: 180},
                {name: "Shooting Star", score: 180}
            ]
        };

        const characters = {
            "Oguri Cap": {speed: 875, stamina: 455, power: 808, guts: 294, wit: 390},
            "Special Week": {speed: 900, stamina: 500, power: 850, guts: 400, wit: 450},
            "Silence Suzuka": {speed: 950, stamina: 400, power: 800, guts: 350, wit: 500},
            "Tokai Teio": {speed: 880, stamina: 520, power: 830, guts: 420, wit: 380},
            "Gold Ship": {speed: 750, stamina: 700, power: 700, guts: 600, wit: 350}
        };

        let equippedSkills = [];

        function init() {

            const charSelect = document.getElementById('charTemplate');
            for (let char in characters) {
                const option = document.createElement('option');
                option.value = char;
                option.textContent = char;
                charSelect.appendChild(option);
            }

            const skillSelect = document.getElementById('skillSelect');

            const sections = [
                {name: 'Gold Skills', skills: skillDatabase.gold},
                {name: 'Blue Skills', skills: skillDatabase.blue},
                {name: 'Yellow Skills', skills: skillDatabase.yellow},
                {name: 'Green Skills', skills: skillDatabase.green},
                {name: 'Red Skills', skills: skillDatabase.red},
                {name: 'Unique Skills', skills: skillDatabase.unique}
            ];

            sections.forEach(section => {
                const optgroup = document.createElement('optgroup');
                optgroup.label = section.name;
                section.skills.forEach(skill => {
                    const option = document.createElement('option');
                    option.value = skill.name;
                    option.textContent = `${skill.name} [+${skill.score}]`;
                    optgroup.appendChild(option);
                });
                skillSelect.appendChild(optgroup);
            });
        }

        function loadCharacterTemplate() {
            const select = document.getElementById('charTemplate');
            const charName = select.value;

            if (charName && characters[charName]) {
                const char = characters[charName];
                document.getElementById('speed').value = char.speed;
                document.getElementById('stamina').value = char.stamina;
                document.getElementById('power').value = char.power;
                document.getElementById('guts').value = char.guts;
                document.getElementById('wit').value = char.wit;

                showMessage(`‚úÖ Loaded character template: ${charName}\n\nStats have been set. Add skills and click CALCULATE.`);
            }
        }

        function calculateStatScore(statValue) {
            if (statValue <= 0) return 0;

            let score = 0;
            if (statValue <= 100) {
                score = statValue * 0.5;
            } else if (statValue <= 400) {
                score = 50 + (statValue - 100) * 1.0;
            } else if (statValue <= 600) {
                score = 350 + (statValue - 400) * 1.5;
            } else if (statValue <= 800) {
                score = 650 + (statValue - 600) * 2.0;
            } else if (statValue <= 1000) {
                score = 1050 + (statValue - 800) * 2.5;
            } else if (statValue <= 1200) {
                score = 1550 + (statValue - 1000) * 3.0;
            } else {
                score = 2150 + (statValue - 1200) * 3.5;
            }

            return Math.round(score);
        }

        function addSkill() {
            const select = document.getElementById('skillSelect');
            const skillName = select.value;

            if (!skillName) {
                showMessage('‚ö†Ô∏è Please select a skill to add.');
                return;
            }

            let skill = null;
            for (let category in skillDatabase) {
                skill = skillDatabase[category].find(s => s.name === skillName);
                if (skill) break;
            }

            if (skill) {
                equippedSkills.push(skill);
                updateSkillList();
                select.value = '';
            }
        }

        function removeSkill(index) {
            equippedSkills.splice(index, 1);
            updateSkillList();
        }

        function clearAllSkills() {
            equippedSkills = [];
            updateSkillList();
            showMessage('üóëÔ∏è All skills cleared.\n\nAdd new skills and click CALCULATE.');
        }

        function updateSkillList() {
            const listDiv = document.getElementById('skillList');

            if (equippedSkills.length === 0) {
                listDiv.innerHTML = '<div style="color: #6c757d; text-align: center; padding: 20px;">No skills added yet. Select a skill above and click "Add Skill".</div>';
                return;
            }

            listDiv.innerHTML = '';
            equippedSkills.forEach((skill, index) => {
                const div = document.createElement('div');
                div.className = 'skill-item';
                div.innerHTML = `
                    <span>${skill.name} [+${skill.score}]</span>
                    <button onclick="removeSkill(${index})">Remove</button>
                `;
                listDiv.appendChild(div);
            });
        }

        function getRank(score) {
            const ranks = [
                {min: 0, max: 299, name: "G Rank"},
                {min: 300, max: 599, name: "G+ Rank"},
                {min: 600, max: 899, name: "F Rank"},
                {min: 900, max: 1299, name: "F+ Rank"},
                {min: 1300, max: 1799, name: "E Rank"},
                {min: 1800, max: 2299, name: "E+ Rank"},
                {min: 2300, max: 2899, name: "D Rank"},
                {min: 2900, max: 3499, name: "D+ Rank"},
                {min: 3500, max: 4899, name: "C Rank"},
                {min: 4900, max: 6499, name: "C+ Rank"},
                {min: 6500, max: 8199, name: "B Rank"},
                {min: 8200, max: 9999, name: "B+ Rank"},
                {min: 10000, max: 12099, name: "A Rank"},
                {min: 12100, max: 14499, name: "A+ Rank"},
                {min: 14500, max: 15899, name: "S Rank"},
                {min: 15900, max: 17499, name: "S+ Rank"},
                {min: 17500, max: 19199, name: "SS Rank"},
                {min: 19200, max: 19599, name: "SS+ Rank"},
                {min: 19600, max: 19999, name: "Ug‚Å∞ Rank"},
                {min: 20000, max: 20399, name: "Ug¬π Rank"},
                {min: 20400, max: 20799, name: "Ug¬≤ Rank"},
                {min: 20800, max: 21199, name: "Ug¬≥ Rank"},
                {min: 21200, max: 21599, name: "Ug‚Å¥ Rank"},
                {min: 21600, max: 22099, name: "Ug‚Åµ Rank"},
                {min: 22100, max: 999999, name: "Ug‚Å∂ Rank"}
            ];

            for (let rank of ranks) {
                if (score >= rank.min && score <= rank.max) {
                    return rank.name;
                }
            }
            return "Unknown Rank";
        }

        function getPointsToNextRank(score) {
            const thresholds = [300, 600, 900, 1300, 1800, 2300, 2900, 3500, 4900, 6500, 8200, 10000, 
                              12100, 14500, 15900, 17500, 19200, 19600, 20000, 20400, 20800, 21200, 
                              21600, 22100];

            for (let threshold of thresholds) {
                if (score < threshold) {
                    return threshold - score;
                }
            }
            return 0;
        }

        function calculate() {

            const speed = parseInt(document.getElementById('speed').value) || 0;
            const stamina = parseInt(document.getElementById('stamina').value) || 0;
            const power = parseInt(document.getElementById('power').value) || 0;
            const guts = parseInt(document.getElementById('guts').value) || 0;
            const wit = parseInt(document.getElementById('wit').value) || 0;

            const speedScore = calculateStatScore(speed);
            const staminaScore = calculateStatScore(stamina);
            const powerScore = calculateStatScore(power);
            const gutsScore = calculateStatScore(guts);
            const witScore = calculateStatScore(wit);
            const statsTotal = speedScore + staminaScore + powerScore + gutsScore + witScore;

            const skillScore = equippedSkills.reduce((sum, skill) => sum + skill.score, 0);

            const uniqueLevel = parseInt(document.getElementById('uniqueLevel').value) || 4;
            const starLevel = parseInt(document.getElementById('starLevel').value) || 3;
            const multiplier = (starLevel <= 2) ? 120 : 170;
            const uniqueScore = uniqueLevel * multiplier;

            const totalScore = statsTotal + skillScore + uniqueScore;
            const rank = getRank(totalScore);
            const pointsToNext = getPointsToNextRank(totalScore);

            let report = `===================================================
      UMA MUSUME RACE CALCULATOR - RESULTS         
===================================================

STATS BREAKDOWN:
  Speed:    ${speed.toString().padStart(4)} (Score: ${speedScore})
  Stamina:  ${stamina.toString().padStart(4)} (Score: ${staminaScore})
  Power:    ${power.toString().padStart(4)} (Score: ${powerScore})
  Guts:     ${guts.toString().padStart(4)} (Score: ${gutsScore})
  Wit:      ${wit.toString().padStart(4)} (Score: ${witScore})
  -----------------------------------------------
  Stats Total Score: ${statsTotal}

EQUIPPED SKILLS (${equippedSkills.length}):`;

            equippedSkills.forEach((skill, index) => {
                report += `\n  ${index + 1}. ${skill.name} [+${skill.score}]`;
            });

            report += `
  -----------------------------------------------
  Skills Total Score: ${skillScore}

UNIQUE SKILL:
  Level: ${uniqueLevel}
  Star Level: ${starLevel} Stars
  -----------------------------------------------
  Unique Skill Score: ${uniqueScore}

===================================================
  TOTAL SCORE: ${totalScore}
  RANK: ${rank}`;

            if (pointsToNext > 0) {
                report += `\n  Points to Next Rank: ${pointsToNext}`;
            } else {
                report += `\n  Maximum Rank Achieved!`;
            }

            report += `\n===================================================`;

            showMessage(report);
        }

        function showMessage(msg) {
            document.getElementById('results').textContent = msg;
        }

        window.onload = init;
    </script>
</body>
</html>

